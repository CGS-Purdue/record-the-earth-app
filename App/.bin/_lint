#!/bin/bash

# -------------------------
#  eslint
# --config path
# --env
# --rulesdir
# --plugin
# npm run lint -- ARG1 --OPT1
# -------------------------
BASE_PATH="$(npm prefix)"

NODE_RUN_ENV=
NODE_RUN_FLAGS=
[[ -f .npmrc ]] && source .npmrc


lint_get_dirs () {
  find -path "*node_modules" -prune -o -type d  -printf "%p/*.js "
}

LINT_ARGS="$@"

cd $INIT_CWD

[[ -z $LINT_ARGS ]] &&  LINT_ARGS="./"

${NODE_RUN_ENV} node ${NODE_RUN_FLAGS} \
  $BASE_PATH/./node_modules/.bin/eslint \
    --ext '.js' \
    --cache \
    --cache-file $BASE_PATH/.eslintcache \
    --ignore-pattern '!node_modules' \
      $LINT_ARGS

exit 0
