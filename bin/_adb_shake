#!/bin/bash

# ANDROID-BUILD
# -------------
# BUILD THE ANDROID PROJECT FROM THE ./android directory

# Config: settings.gradle
# Outputs: bundle.jar

BASE_DIR="$(npm prefix)"
ANDROID_SERIAL="025abd11727717ac"

$ANDROID_HOME/platform-tools/adb devices \
  | grep '\\t' \
  | awk '{print $1}' \
  | sed 's/\\s//g' \
  | xargs -I {} "$ANDROID_HOME/platform-tools/adb" audit \
    $HOME/platform-tools/adb -s {} shell input keyevent 82


# For anyone who is having issues with the first command (in cases like a text input which cannot be unfocused), an alternative is adb shell "input keyevent 82 && input keyevent 66 && input keyevent 66". It manually hits 'Reload' in the developer menu â€“ Jonny Jul 10 at 19:31
